import unittest

from manipulation.ucm import generate_LP
from manipulation.utils import borda
import numpy as np


class TestUCM(unittest.TestCase):
    # @nottest
    def test_generate_LP(self):
        m = 3
        k = 3
        alpha = borda(m)
        sigma = np.ones(m, dtype=int) * m
        A, B,c = generate_LP(alpha, sigma, m, k)

        self.assertListEqual(A.tolist(), [[-1., -0., -0., -0., -0., -0., -0., -0., -0., -0.],
                                       [-0., -1., -0., -0., -0., -0., -0., -0., -0., -0.],
                                       [-0., -0., -1., -0., -0., -0., -0., -0., -0., -0.],
                                       [-0., -0., -0., -1., -0., -0., -0., -0., -0., -0.],
                                       [-0., -0., -0., -0., -1., -0., -0., -0., -0., -0.],
                                       [-0., -0., -0., -0., -0., -1., -0., -0., -0., -0.],
                                       [-0., -0., -0., -0., -0., -0., -1., -0., -0., -0.],
                                       [-0., -0., -0., -0., -0., -0., -0., -1., -0., -0.],
                                       [-0., -0., -0., -0., -0., -0., -0., -0., -1., -0.],
                                       [-0., -0., -0., -0., -0., -0., -0., -0., -0., -1.],
                                       [1., 1., 1., 0., 0., 0., 0., 0., 0., 0.],
                                       [0., 0., 0., 1., 1., 1., 0., 0., 0., 0.],
                                       [0., 0., 0., 0., 0., 0., 1., 1., 1., 0.],
                                       [-1., 0., 0., -1., 0., 0., -1., 0., 0., 0.],
                                       [0., -1., 0., 0., -1., 0., 0., -1., 0., 0.],
                                       [0., 0., -1., 0., 0., -1., 0., 0., -1., 0.],
                                       [0., 1., 2., 0., 0., 0., 0., 0., 0., -1.],
                                       [0., 0., 0., 0., 1., 2., 0., 0., 0., -1.],
                                       [0., 0., 0., 0., 0., 0., 0., 1., 2., -1.]])

        self.assertListEqual(B.tolist(), [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 3., 3., 3.,
                                       -3., -3., -3., -3., -3., -3.])

        self.assertListEqual(c.tolist(), [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.])
